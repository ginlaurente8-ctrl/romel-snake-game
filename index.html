<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Snake Game</title>
<style>
    body {
        background: #111;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        font-family: Arial, sans-serif;
        color: white;
        user-select: none;
    }

    #gameBox {
        width: 400px;
        height: 400px;
        background: #222;
        display: grid;
        grid-template-columns: repeat(20, 20px);
        grid-template-rows: repeat(20, 20px);
        border: 3px solid #0f0;
    }

    .snake {
        background: #0f0;
    }

    .food {
        background: red;
    }

    #score {
        font-size: 24px;
        margin-bottom: 10px;
    }

    /* Mobile Controls */
    #controls {
        margin-top: 20px;
        display: grid;
        grid-template-columns: 80px 80px 80px;
        grid-template-rows: 80px 80px;
        gap: 10px;
    }

    .btn {
        background: #333;
        border: 2px solid #0f0;
        border-radius: 10px;
        font-size: 24px;
        display: flex;
        justify-content: center;
        align-items: center;
    }

    .btn:active {
        background: #0f0;
        color: black;
    }

    #up { grid-column: 2; }
    #down { grid-column: 2; grid-row: 2; }
    #left { grid-column: 1; grid-row: 2; }
    #right { grid-column: 3; grid-row: 2; }

</style>
</head>
<body>

<div id="score">Score: 0</div>
<div id="gameBox"></div>

<!-- Mobile Controls -->
<div id="controls">
    <div class="btn" id="up">⬆</div>
    <div class="btn" id="left">⬅</div>
    <div class="btn" id="down">⬇</div>
    <div class="btn" id="right">➡</div>
</div>

<script>
const gameBox = document.getElementById("gameBox");
const scoreBox = document.getElementById("score");

let snake = [{x: 10, y: 10}];
let dx = 1, dy = 0;
let food = {x: 5, y: 5};
let score = 0;

function drawGame() {
    gameBox.innerHTML = "";

    snake.forEach(s => {
        const div = document.createElement("div");
        div.style.gridColumnStart = s.x;
        div.style.gridRowStart = s.y;
        div.classList.add("snake");
        gameBox.appendChild(div);
    });

    const foodDiv = document.createElement("div");
    foodDiv.style.gridColumnStart = food.x;
    foodDiv.style.gridRowStart = food.y;
    foodDiv.classList.add("food");
    gameBox.appendChild(foodDiv);
}

function moveSnake() {
    const head = {x: snake[0].x + dx, y: snake[0].y + dy};

    // Wall collision
    if (head.x < 1 || head.x > 20 || head.y < 1 || head.y > 20) {
        alert("Game Over! Score: " + score);
        location.reload();
    }

    // Self collision
    for (let s of snake) {
        if (s.x === head.x && s.y === head.y) {
            alert("Game Over! Score: " + score);
            location.reload();
        }
    }

    snake.unshift(head);

    // Eat food
    if (head.x === food.x && head.y === food.y) {
        score++;
        scoreBox.innerText = "Score: " + score;
        food = {
            x: Math.floor(Math.random() * 20) + 1,
            y: Math.floor(Math.random() * 20) + 1
        };
    } else {
        snake.pop();
    }
}

// Keyboard controls
document.addEventListener("keydown", e => {
    if (e.key === "ArrowUp" && dy !== 1) { dx = 0; dy = -1; }
    if (e.key === "ArrowDown" && dy !== -1) { dx = 0; dy = 1; }
    if (e.key === "ArrowLeft" && dx !== 1) { dx = -1; dy = 0; }
    if (e.key === "ArrowRight" && dx !== -1) { dx = 1; dy = 0; }
});

// Touch controls
document.getElementById("up").onclick = () => { if (dy !== 1) { dx = 0; dy = -1; } };
document.getElementById("down").onclick = () => { if (dy !== -1) { dx = 0; dy = 1; } };
document.getElementById("left").onclick = () => { if (dx !== 1) { dx = -1; dy = 0; } };
document.getElementById("right").onclick = () => { if (dx !== -1) { dx = 1; dy = 0; } };

setInterval(() => {
    moveSnake();
    drawGame();
}, 150);
</script>

</body>
</html>